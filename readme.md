# Продвинутый Python Прокси Чекер

[![Python Version](https://img.shields.io/badge/python-3.7+-blue.svg)](https://www.python.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Многопоточный скрипт на Python для проверки работоспособности HTTP/HTTPS прокси-серверов. Он проверяет список прокси из файлов, определяет их доступность, задержку до целевого хоста, опционально пингует IP-адрес прокси и тестирует скорость скачивания. Рабочие прокси сохраняются в отдельный файл.

Скрипт совместим с macOS, Linux и Windows.

## Возможности

*   **Многопоточность:** Быстрая проверка большого количества прокси с использованием заданного числа потоков.
*   **Проверка IP (для публичных прокси):** Убеждается, что внешний мир видит IP-адрес самого прокси, а не ваш. Пропускается для приватных/локальных IP.
*   **Проверка доступности и задержки:** Отправляет запрос на указанный хост (`host_check_url`) через прокси и измеряет время ответа.
*   **Пинг (опционально):** Измеряет сетевую задержку непосредственно до IP-адреса прокси с помощью системной команды `ping`.
*   **Тест скорости (опционально):** Скачивает небольшой файл (`speed_test_url`) через прокси для оценки реальной пропускной способности.
*   **Гибкая конфигурация:** Все параметры (потоки, таймауты, URL для проверок, файлы импорта/экспорта и т.д.) настраиваются через файл `config.json`.
*   **Автоматическое создание конфига:** Если `config.json` отсутствует, он будет создан с настройками по умолчанию при первом запуске.
*   **Обработка приватных IP:** Корректно обрабатывает прокси в локальной сети (пропускает проверку внешнего IP).
*   **Цветной вывод:** Наглядное отображение результатов проверки в консоли с использованием цветов.
*   **Экспорт рабочих прокси:** Сохраняет прокси, прошедшие проверку по критерию задержки (`max_ms`), в указанный файл.

## Требования

*   **Python 3.7+**
*   **pip** (менеджер пакетов Python)

## Установка зависимостей

1.  Клонируйте репозиторий или скачайте скрипт (`proxy_checker.py`).
2.  Откройте терминал или командную строку в папке со скриптом.
3.  Установите необходимые библиотеки:
    ```bash
    pip3 install requests colorama
    ```
    (Или `pip install requests colorama`, если `pip3` не используется)

## Конфигурация

Перед запуском необходимо настроить параметры в файле `config.json`, который должен находиться в той же директории, что и скрипт. Если файл отсутствует, он будет создан автоматически при первом запуске.

**Пример `config.json`:**

```json
{
    "thread": 50,               "# Количество одновременных потоков проверки",
    "timeout": 10,              "# Таймаут для HTTP-запросов (сек)",
    "max_ms": 5000,             "# Макс. задержка ответа хоста (мс) для сохранения прокси",
    "import": [                 "# Список файлов с прокси для импорта (формат IP:PORT)",
        "proxies.txt"
    ],
    "export": "good_proxies.txt","# Имя файла для сохранения рабочих прокси",
    "host_check_url": "https://www.google.com", "# URL для проверки доступности и задержки",
    "ip_check_url": "https://api.ipify.org?format=json", "# URL для проверки внешнего IP",
    "enable_ping": true,        "# Включить проверку пинга? (true/false)",
    "ping_timeout_ms": 1000,    "# Таймаут для одного пакета пинга (мс)",
    "enable_speed_test": true,  "# Включить тест скорости скачивания? (true/false)",
    "speed_test_url": "http://speedtest.tele2.net/1MB.zip", "# URL файла для теста скорости",
    "speed_min_good_kbps": 100  "# Мин. скорость (KB/s) для зеленого цвета в логе (не влияет на сохранение)"
}
````
**Описание параметров:

thread: Число потоков для одновременной проверки. Увеличивайте осторожно, чтобы не перегрузить систему/сеть.
timeout: Максимальное время ожидания ответа на HTTP-запросы (проверка IP, проверка хоста, тест скорости).
max_ms: Прокси будет сохранен в файл экспорта, только если задержка ответа от host_check_url меньше этого значения.
import: Список путей к файлам, содержащим прокси (один IP:PORT на строку).
export: Имя файла, куда будут записаны рабочие прокси. Файл очищается перед каждым запуском.
host_check_url: Стабильный URL для проверки базовой работоспособности прокси и измерения задержки.
ip_check_url: Сервис, возвращающий IP-адрес клиента в формате JSON ({"ip": "..."}). Используется для проверки анонимности публичных прокси.
enable_ping: Включает/отключает измерение прямого пинга до IP прокси.
ping_timeout_ms: Таймаут для команды ping.
enable_speed_test: Включает/отключает тест скорости скачивания.
speed_test_url: URL файла (рекомендуется 1-10 МБ) для теста скорости. Выберите надежный источник.
speed_min_good_kbps: Порог скорости в КБ/с для отображения зеленым цветом в логах (информативно).
Использование
Создайте один или несколько текстовых файлов (например, proxies.txt) и заполните их списком прокси в формате IP_АДРЕС:ПОРТ, по одному на строку.
Укажите имена этих файлов в параметре import в config.json.
Настройте остальные параметры в config.json по вашему усмотрению.
Запустите скрипт из терминала:

python3 proxy_checker.py

Или python proxy_checker.py)
Скрипт начнет проверку, выводя результаты в консоль. Рабочие прокси будут сохранены в файл, указанный в параметре export.

185.191.206.12:8080 | 235ms | Ping: 45ms | Speed: 1250 KB/s   <-- Хороший прокси
91.205.174.26:80   | 4800ms | Ping: 150ms | Speed: 80 KB/s    <-- Медленный (но может быть сохранен)
192.168.1.250:8881 | Пропуск проверки IP (приватный/локальный адрес)
192.168.1.250:8881 | 704ms | Ping: 1ms | Speed: N/A          <-- Локальный, скорость не определена (таймаут?)
45.10.111.198:9050 | Тайм-аут при проверке хоста (https://www.google.com) <-- Нерабочий
81.91.187.197:8080 | IP не совпадает (ожидался 81.91.187.197, получен X.X.X.X) <-- Не анонимный / Проблемный

Этот проект распространяется под лицензией MIT. Смотрите файл LICENSE для подробностей (если вы его добавите).


**Рекомендации:**

1.  **Назовите файл:** Сохраните этот текст как `README.md` в корневой папке вашего репозитория на GitHub.
2.  **Имя скрипта:** Убедитесь, что имя скрипта в командах (`python3 proxy_checker.py`) совпадает с реальным именем вашего файла (`.py`).
3.  **Лицензия:** Если вы хотите использовать лицензию MIT, создайте также файл `LICENSE` в репозитории и скопируйте туда стандартный текст лицензии MIT (легко найти в интернете).
4.  **Английская версия (опционально):** Для большей доступности вы можете создать и английскую версию README (например, `README.en.md`) или сделать основной README на английском.
